{%- assign tocNodes = hierarchy | where_exp:"item", "item.name == page.id" | map: "items" | first -%}
{%- if tocNodes.size > 0 -%}
  <hr>
  <h2 class="text-delta">Table of contents</h2>
  {%- assign sorted_nodes = tocNodes | sort_natural:"nav_order" -%}
  <ul>
    {%- for tocNode in sorted_nodes -%}
      <li>
        <a href="{{ tocNode.url | absolute_url }}">{{ tocNode.title }}</a>
        {%- if tocNode.summary -%}
          -
          {{ tocNode.summary }}
        {%- endif -%}
      </li>
    {%- endfor -%}
  </ul>
{%- endif -%}
